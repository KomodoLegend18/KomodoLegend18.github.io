<html>
<head>
    <title>HOLORADIO</title>
    <meta content="HoloRadio" property="og:title">
    <meta content="Komodo's Personal Github Page" property="og:description">
    <meta content="https://komodolegend18.github.io/projects/Holoradio" property="og:url">
    <meta content="https://preview.redd.it/49v7a9w3qro51.jpg?width=507&format=pjpg&auto=webp&s=6cdda412b1fa77096e9ee912ae16f597d2ef4afc" property="og:image">
    <meta content="#00ffd6" data-react-helmet="true" name="theme-color">
    <link rel="icon" href="https://user-images.strikinglycdn.com/res/hrscywv4p/image/upload/c_limit,fl_lossy,h_64,w_64,q_auto/1369026/logo_square_qn4ncy.png" type="image/icon type">
    <link rel="stylesheet" href="https://komodolegend18.github.io/projects/holoradio.css">
    <!-- <link rel="stylesheet" href="file:///C:/Users/Fandy/Documents/GitHub/KomodoLegend18.github.io/projects/holoradio.css"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div id="player"></div>
    <p id="mobiletext" style="width: 100vmax; float:left; padding-top: 350px;">aaaaaaa</p>
        
        
    <div id="help">
        <img src="https://komodolegend18.github.io/projects/assets/1.png" id="jsimg" style="width: 100%; aspect-ratio: 16/9;">
        <a href="https://komodolegend18.github.io" target="_blank" id="jsurl" style="background-color: red; color: white; text-decoration: none; text-align: center;">Play Current Music to Update Data | Open Current Song in YouTube</a>
        <p style="width: 100%;background-color: gray;">Keyboard Shortcuts</p>
        <p>12/4/3:13</p>
        <!-- <button onclick="komocount=200" style="width: 50%; height: auto;">[DEBUG]</button> -->
        <!-- <p>Click [DEBUG] to simulate 200 played songs and press 9 or go to the end of the song (don't skip/shift+n) to test playlist switching</p> -->
        <p>Spacebar or [k]: Play / Pause</p><br>
        <p>Arrow Left: Jump back 5 seconds in the current video</p><br>
        <p>Arrow Right: Jump ahead 5 seconds in the current video</p><br>
        <p>Arrow Up: Volume up</p><br>
        <p>Arrow Down: Volume Down</p><br>    
        <s title="Disabled">[f]: Toggle full-screen display</s><br>    
        <p>[j]: Jump back 10 seconds in the current video</p><br>    
        <p>[l]: Jump ahead 10 seconds in the current video</p><br>
        <p>[m]: Mute or unmute the video</p><br>
        <p>[0-9]: Jump to a point in the video. 0 jumps to the beginning of the video, 1 jumps to the point 10% into the video, 2 jumps to the point 20% into the video, and so forth.</p>
    </div>

    
    <script>
        /* Replace This Code - get Value from playlist page and place it here */
        var playlistId = "PLowuZgbBgs5XvlwDBAf5eBuL1BQRQpaGE";
        var tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
    
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    
        var player;
    
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                //height: '100%',
                //width: '100%',
                playerVars: {
                    autoplay: 0,        // Auto-play the video on load
                    controls: 1,        // Show pause/play buttons in player
                    modestbranding: 1,  // Hide the Youtube Logo
                    loop: 1,            // Run the video in a loop
                    fs: 1,              // Hide the full screen button
                    cc_load_policy: 1, // Hide closed captions
                    iv_load_policy: 3,  // Hide the Video Annotations
                    autohide: 0,         // Hide video controls when playing
                    rel: 0,              // hide related vids
                    widget_referrer: 'https://komodolegend18.github.io/projects/Holoradio',
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange,
                    'onError': onPlayerError,
                }
    
            });
        }
        var playlistArray;
        var playListArrayLength;
        var maxNumber;
    
        var oldNumber = 0;
        var NewNumber = 0;
        var komocount = 0;
    
        // function newRandomNumber() {
        //     oldNumber = NewNumber;
        //     NewNumber = Math.floor(Math.random() * maxNumber);
        //     if (NewNumber == oldNumber) {
        //         newRandomNumber();
        //     } else {
        //         return NewNumber;
        //     }
        //     if (NewNumber==maxNumber){
        //         newRandomNumber();
        //     }
        // }
    
    function onPlayerReady(event) {
        setTimeout(function() {
            event.target.setShuffle({'shufflePlaylist' : true});
        }, 1000);
        player.loadPlaylist({
            'listType': 'playlist',
            'list': playlistId
        });
        setTimeout(function() {
            event.target.playVideoAt(0);
        }, 1000);
        
        // event.target.playVideo();
        // event.target.mute();
        // setTimeout(function(){
        //     event.target.unMute(); 
        // }, 2500);
    }

    var firstLoad = true;
    function onPlayerStateChange(event) {
        // getVideoData documentation is gone, so here's some available parameters that i found
        // title, video_id, author, video_quality, video_quality_features, list
        // document.title = "HOLORADIO || "+player.getVideoData().title+" || "+player.getVideoData().author;
        document.title = "Welcome to HOLORADIO";
        document.getElementById("mobiletext").innerHTML =player.getVideoData().title;

        // console.log("event status="+event.data);
        // console.log("Counter="+komocount);

        // console.log(player.getDuration());
        //window.location.reload();
        //console.log("NewNum="+NewNumber);
        //console.log("OldNum="+oldNumber);
        //console.log("array="+playlistArray);
        // YT.PlayerState.ENDED //backup

        // If Video Played, Show this in console
        if (event.data == 1){
            // Show now playing in Dev Console f12
            console.log('Now Playing :\n%c'+player.getVideoData().title+"\nby "+player.getVideoData().author, 'background: rgba(56, 255, 228, 0.5); color: black; font-size: 200%');
            // Set Now Playing Song as Page Title
            document.title = "Now Playing : "+player.getVideoData().title+" || "+player.getVideoData().author;
            // Set Title after 10 Secs
            setTimeout(function() {
                document.title = "HOLORADIO || "+player.getVideoData().title+" || "+player.getVideoData().author;
            }, 10000);
            // Add ID of current song to button
            document.getElementById("jsurl").innerHTML =player.getVideoData().video_id+" | Open Current Song in YouTube";
            // Get URL of current song
            document.getElementById("jsurl").href="https://youtu.be/"+player.getVideoData().video_id;
            // Get Max Resolution Thumbnail of Current Song and put it in sidebar
            document.getElementById("jsimg").src="https://i.ytimg.com/vi/"+player.getVideoData().video_id+"/maxresdefault.jpg";
        }
        if (event.data == 2){
                    document.title = "Paused : "+player.getVideoData().title+" || "+player.getVideoData().author;
        }

        // If Playlist end, do this
        if (event.data == YT.PlayerState.ENDED) {
            komocount=komocount+201;
            // Play next video after playlist end
            player.playVideo();
            player.playVideoAt(newRandomNumber());
            console.log("Player state ended");
        }
        // Else, do this
        else {
            if (firstLoad && event.data == YT.PlayerState.PLAYING) {
                firstLoad = false;
                playlistArray = player.getPlaylist();
                playListArrayLength = playlistArray.length;
                maxNumber = playListArrayLength;
                NewNumber = newRandomNumber();
                komocount=komocount+1;
                player.playVideoAt(newRandomNumber());
                console.log("firstLoad && event.data == YT.PlayerState.PLAYING");
            }
        }
        if (komocount>200){
            //window.location.reload();
            window.location.replace("https://komodolegend18.github.io/projects/Holoradio2");
        }
    }
    
    function onPlayerError(event) {
        console.log(event.data);
        player.nextVideo();
        // player.playVideoAt(newRandomNumber());   
    }
    // newPageTitle = player.getVideoUrl();
    // document.title = newPageTitle;
    
    </script>
</body>
</html>
