<html>
<head>
    <title>HOLORADIO</title>
    <link rel="icon" href="https://user-images.strikinglycdn.com/res/hrscywv4p/image/upload/c_limit,fl_lossy,h_64,w_64,q_auto/1369026/logo_square_qn4ncy.png" type="image/icon type">
</head>
<body>
    <!--
    <div id="muteYouTubeVideoPlayer"></div>

    <script async src="https://www.youtube.com/iframe_api"></script>
    <script>
     function onYouTubeIframeAPIReady() {
      var player;
      player = new YT.Player('muteYouTubeVideoPlayer', {
        width: 1366,               // Player width (in px)
        height: 768,              // Player height (in px)
        playerVars: {
          listType:'playlist',
          list: 'PLowuZgbBgs5X66yiQjWU-J0Ds51Eu24zO',
          autoplay: 1,        // Auto-play the video on load
          controls: 1,        // Show pause/play buttons in player
          showinfo: 0,        // Hide the video title
          modestbranding: 1,  // Hide the Youtube Logo
          loop: 1,            // Run the video in a loop
          fs: 0,              // Hide the full screen button
          cc_load_policy: 0, // Hide closed captions
          iv_load_policy: 3,  // Hide the Video Annotations
          autohide: 1         // Hide video controls when playing
        },
        events: {
          onReady: function(e) {
            e.target.mute();
          },
          onError: function(e){
            e.target.nextVideo();
            e.target.playVideo();
          }
        }
      });
     }
    </script>
    -->
    <style>
        body{
            background-color: black;
            overflow: hidden;
            position: relative;
        }
        #help{
            font-weight: bold;
            margin-top: -1%;
            margin-bottom: -2%;
            margin-left: -17%;
            float: left;
            width: 15%;
            height: 104%;
            color:rgba(255, 255, 255, 0);
            background-color:rgba(56, 255, 228, 0);
            padding-right: 20px;
            padding-left: 10px;
            position: absolute;
            z-index: 1;
            cursor: default;
            transition-duration: 150ms;
        }
        #help s{
            cursor: not-allowed;
            color: gray;
        }
        #help:hover{
            color: rgba(255, 255, 255, 0.88);
            width: 20%;
            padding-right: 4px;
            margin-left: -1%;
            transition-duration: 350ms;
            overflow: scroll;
            overflow-x: hidden;
            background-color: rgba(56, 255, 228, 0.88);
        }
        #videoplayer{
            width: 100%;
            height: 100%;
            float: right;
            position: absolute;
            left: 0%;
            top: 0%;
        }
    </style>

    <div id="help">
        <p style="width: 100%;background-color: gray;">Keyboard Shortcuts</p>
        <p>Version 3/4/m24</p>
        <button onclick="komocount=200" style="width: 50%; height: auto;">[DEBUG]</button>
        <p>Spacebar or [k]: Play / Pause</p><br>
        <p>Arrow Left: Jump back 5 seconds in the current video</p><br>
        <p>Arrow Right: Jump ahead 5 seconds in the current video</p><br>
        <p>Arrow Up: Volume up</p><br>
        <p>Arrow Down: Volume Down</p><br>    
        <s title="Disabled">[f]: Toggle full-screen display</s><br>    
        <p>[j]: Jump back 10 seconds in the current video</p><br>    
        <p>[l]: Jump ahead 10 seconds in the current video</p><br>
        <p>[m]: Mute or unmute the video</p><br>
        <p>[0-9]: Jump to a point in the video. 0 jumps to the beginning of the video, 1 jumps to the point 10% into the video, 2 jumps to the point 20% into the video, and so forth.</p>
    </div>

    <div style="float: right; width: 100%; height: 100%;position: absolute;" id="player"></div>
    <script>
        /* Replace This Code - get Value from playlist page and place it here */
        var playlistId = "PLowuZgbBgs5XvlwDBAf5eBuL1BQRQpaGE";
        var tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
    
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    
        var player;
    
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                //height: '100%',
                //width: '100%',
                playerVars: {
                    autoplay: 1,        // Auto-play the video on load
                    controls: 0,        // Show pause/play buttons in player
                    modestbranding: 1,  // Hide the Youtube Logo
                    loop: 1,            // Run the video in a loop
                    fs: 0,              // Hide the full screen button
                    cc_load_policy: 1, // Hide closed captions
                    iv_load_policy: 3,  // Hide the Video Annotations
                    autohide: 0,         // Hide video controls when playing
                    rel: 0,              // hide related vids
                    widget_referrer: 'https://komodolegend18.github.io/projects/Holoradio',
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange,
                    'onError': onPlayerError,
                }
    
            });
        }
    
    
        var playlistArray;
        var playListArrayLength;
        var maxNumber;
    
        var oldNumber = 0;
        var NewNumber = 0;
        var komocount = 0;
    
        function newRandomNumber() {
            oldNumber = NewNumber;
            NewNumber = Math.floor(Math.random() * maxNumber);
            if (NewNumber == oldNumber) {
                newRandomNumber();
            } else {
                return NewNumber;
            }
            if (NewNumber==maxNumber){
                newRandomNumber();
            }
        }
    
    function onPlayerReady(event) {
        player.loadPlaylist({
            'listType': 'playlist',
            'list': playlistId
        });
    }

    var firstLoad = true;
    function onPlayerStateChange(event) {
        console.log("event status="+event.data);
        console.log("Counter="+komocount)
        //window.location.reload();
        //console.log("NewNum="+NewNumber);
        //console.log("OldNum="+oldNumber);
        //console.log("array="+playlistArray);
        if (event.data == YT.PlayerState.ENDED) {
            komocount=komocount+1;
            player.playVideoAt(newRandomNumber());
        } else {
            if (firstLoad && event.data == YT.PlayerState.PLAYING) {
                firstLoad = false;
                playlistArray = player.getPlaylist();
                playListArrayLength = playlistArray.length;
                maxNumber = playListArrayLength;
                NewNumber = newRandomNumber();
                komocount=komocount+1;
                player.playVideoAt(newRandomNumber());
            }
        }
        if (komocount>200){
            //window.location.reload();
            window.location.replace("https://komodolegend18.github.io/projects/Holoradio2");
        }
    }
    
    function onPlayerError(event) {
        console.log(event.data);
        
        player.playVideoAt(newRandomNumber());   
    }
        
    </script>
    <!--
    <div class="videoplayer" id="ytplayer"></div>
    <script>
        var getRandom = function(min, max) {
          return Math.random() * (max - min) + min;
        };
    
      // Load the IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    
      // Replace the 'ytplayer' element with an <iframe> and
      // YouTube player after the API code downloads.
      var player;
var videoList, videoCount;
function onYouTubeIframeAPIReady()
{
    player = new YT.Player('ytplayer',
    {
        height: '100%',
        width: '100%',
        events:
        {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        },

        playerVars:
        {
            controls:0,
            autoplay:0
        }
    });
}

function onPlayerReady(event)
{
    // cue the playlist, to get the video's ids 
    event.target.cuePlaylist
    ({
        listType: 'playlist',
        list: 'PLowuZgbBgs5X66yiQjWU-J0Ds51Eu24zO',
        suggestedQuality:'small',
        autoplay: 1,
        index:0,
    });

    event.target.setLoop();
}

function onPlayerStateChange(event)
{
    if(event.data == YT.PlayerState.CUED)
    {
        videoList = event.target.getPlaylist();

        // to prevent adding new video and for the randomize
        videoCount = videoList.length; 

        // get the ids before randomize playlist, send it
        sendIds(videoList);

        // starting the player (like autoplay)
        event.target.playVideo();
    }

    // randomize at each video ending
    if(event.data == YT.PlayerState.ENDED)
    {
        var num = getRandom(1,676);
        event.target.playVideoAt(num);
    }
}

function sendIds(ids)
{
    console.log(ids);
    // make what you want to do with them... ajax call to your php
}
    </script>
    -->
</body>
</html>
