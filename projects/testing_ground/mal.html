<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Webhook Test</title>
    <link rel="icon" href="https://user-images.strikinglycdn.com/res/hrscywv4p/image/upload/c_limit,fl_lossy,h_64,w_64,q_auto/1369026/logo_square_qn4ncy.png" type="image/icon type">
    <!-- <script src="https://KomodoLegend18.github.io/projects/tzclock.js"></script> -->
  </head>
  <body>
    <h1 id="first"></h1>
    <h2 id="second"></h2>
    <h2 id="third"></h2>
  </body>


  <script>
    var anime_id = prompt("Input ID:");
    var token = prompt("Input TOKEN:");
    var url = `https://api.myanimelist.net/v2/anime/${anime_id}?fields=id,title,main_picture,alternative_titles,start_date,end_date,synopsis,mean,rank,popularity,num_list_users,num_scoring_users,nsfw,created_at,updated_at,media_type,status,genres,my_list_status,num_episodes,start_season,broadcast,source,average_episode_duration,rating,pictures,background,related_anime,related_manga,recommendations,studios,statistics`;

    var xhr = new XMLHttpRequest();
    xhr.open("GET", url);
    xhr.setRequestHeader("X-MAL-CLIENT-ID", token);
    xhr.responseType = 'json';
    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4) {
          var MALResponse = xhr.response;
          var MALResponseJSON = JSON.parse(MALResponse);
          console.log(xhr.status);
          console.log(MALResponseJSON);
          var anime_title = MALResponseJSON.title;
          var anime_rating = MALResponseJSON.mean;
          var anime_pic = MALResponseJSON.main_picture;
          document.write(`<h1>${i+1}. ${anime_title} [${anime_rating}] (${anime_pic})</h1>`);
      }};

    xhr.send();
  </script>

</html>